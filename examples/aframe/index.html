<!doctype html>
<html>
<head>
	<!-- include A-Frame obviously -->
	<script src="https://aframe.io/releases/0.6.0/aframe.min.js"></script>
	<!-- include ar.js for A-Frame -->
	<script src="https://jeromeetienne.github.io/AR.js/aframe/build/aframe-ar.js"></script>
	<!-- <meta name="viewport" content="width=device-width, initial-scale=1.0"> -->
	<style type="text/css">
		#arjsDebugUIContainer, .a-enter-vr-button {display: none !important;}
	</style>
	<script type="text/javascript">
		AFRAME.registerComponent('box', {
  schema: {
    width: {type: 'number', default: 1},
    height: {type: 'number', default: 1},
    depth: {type: 'number', default: 1},
    color: {type: 'color', default: '#ff00ff'}
  },

  /**
   * Initial creation and setting of the mesh.
   */
  init: function () {
    var data = this.data;
    var el = this.el;

    // Create geometry.
    this.geometry = new THREE.BoxBufferGeometry(data.width, data.height, data.depth);

    // Create material.
    this.material = new THREE.MeshStandardMaterial({color: data.color});

    // Create mesh.
    this.mesh = new THREE.Mesh(this.geometry, this.material);

    // Set mesh on entity.
    el.setObject3D('mesh', this.mesh);
  },
  tick: function() {
  	// console.log('tick')
  }
});
	</script>
</head>
<body style='margin : 0px; overflow: hidden;'>
	<a-scene embedded arjs>
		<!-- define a camera which will move according to the marker position -->
		<a-marker-camera preset='hiro'></a-marker-camera>
		<!-- create your content here. just a box for now -->
		<a-entity id="tick" box="width: 0.5; height: 0.25; depth: 1; color: orange"
            position="0 0 -5"></a-entity>
		<a-box id="foo" position='0 0.5 0' material='opacity: 0.5;'></a-box>
		<a-box color="tomato" position='1 0.5 0' material='opacity: 1;'></a-box>
	</a-scene>

	<script>
		const tick = document.querySelector('#tick');
		console.log(tick.object3D	)
		const box = document.querySelector('#foo');
		box.setAttribute('color', '#FF9500');
		box.update = function() {
			console.log('udpate');
		}
		const rot = {
			x: 0,
			y: 0,
			z: 0
		};

		let lastTouch = {};
		function touchStart(ev) {
			console.log(ev);
		}
		function touchMove() {

		}
		function touchEnd(ev) {
			console.log(lastTouch);
		}

		window.addEventListener("touchstart", touchStart, false);
  		window.addEventListener("touchend", touchEnd, false);
  		// window.addEventListener("touchcancel", touchMove, false);
  		window.addEventListener("touchmove", touchMove, false);

  		// testing 
  		window.addEventListener('mousedown', mouseDown);
  		window.addEventListener('mouseup', mouseUp);
  		window.addEventListener('mousemove', mouseMove);

  		let mouse = {};
		function mouseDown(ev) {
			mouse.x = ev.x;
			mouse.y = ev.y;
			mouse.px = ev.x;
			mouse.py = ev.y;
		}
		function mouseMove(ev) {
			mouse.x = ev.x;
			mouse.y = ev.y;
		}
		function mouseUp(ev) {
			
		}


	</script>
</body>